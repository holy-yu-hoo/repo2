server {
    listen               80;
    listen               443       default_server ssl;
    server_name          localhost;
    client_max_body_size 100M;

    ssl_certificate     /etc/ssl/certs/self.crt;
    ssl_certificate_key /etc/ssl/certs/self.key;

    include ssl-params.conf;

    location / {
        proxy_pass http://app:8000;

        proxy_connect_timeout 30s;
        proxy_send_timeout    30s;
        proxy_read_timeout    30s;
    }

    location /static/ {
        alias     /static/;
        autoindex on;
    }

    location /errors/ {
        root      /templates;
        autoindex on;
    }

    error_page 403 /errors/error_403.html;
    error_page 404 /errors/error_404.html;
    error_page 502 /errors/error_502.html;
}